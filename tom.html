<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        url = 'http://localhost:8082';
        function leesItems(){
            let xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function(){
                if (this.readyState == 4){
                    let aanvraag = JSON.parse(this.responseText);
                    console.log(aanvraag);
                }
            };
                xhr.open("GET", url+"/getmeall",true);
                xhr.send();
            
        }

        function voegItemsToe(){
            let xhr =new XMLHttpRequest();
            console.log(xhr.onreadystatechange);
            console.log(this.responseText);
            xhr.onreadystatechange = function(){
                if(this.readyState == 4){
                    let aanvraag2 = JSON.parse(this.responseText);
                    document.getElementById("onsresultaat").innerHTML =
                aanvraag2.tijdstip;
                }
            };
            xhr.open("GET", url+"/returntype", true);
            xhr.send();            
            
        }

        function voegZelfItemsToe() {
            lijstje = {};
            lijstje.titel = document.getElementById("inputtitel").value;
            lijstje.aantalpersonen = document.getElementById("inputaantalpersonen").value;
            lijstje.bedrijfsnaam = document.getElementById("inputbedrijfsnaam").value;
            console.log(lijstje);
            let data = JSON.stringify(lijstje);
            console.log(data);
            xhr = new XMLHttpRequest();
            xhr.open("POST",url+ "/maakaanvrager",true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.send(data);
        }

        function haalOp(){
            xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function(){
            if(this.readyState == 4){
            let ophaal = JSON.parse(this.responseText);
            invoertext = "<table>";
            for(let i =0;i<ophaal.length;i++){
                invoertext += `<tr><td>${ophaal[i].titel}</td><td>${ophaal[i].bedrijfsnaam}</td><td><input type="button" onclick="verwijderen(${ophaal[i].id})" value="verwijder"></td></tr>`; 
            }
            invoertext += "</table>";
            document.getElementById("aanvragers").innerHTML=invoertext;
            }
            };
            xhr.open("GET", url+"/aanvragerophaal",true);
            xhr.send();
        }

        function verwijderen(id){
            xhr = new XMLHttpRequest();
            xhr.open("DELETE", url+"/deletetom/"+id,true);
            xhr.send();
        }

    </script>
</head>
<body>
    <button type="button" onclick="leesItems()">klikerdeklik</button>
    <button type="button" onclick="voegItemsToe()">voeg toe</button>
    <div id="onsresultaat"></div>
    <input type="text", id="inputtitel" placeholder="titel">
    <input type="text" id="inputaantalpersonen" placeholder="aantalpers">
    <input type="text" id="inputbedrijfsnaam" placeholder="bedrijfsnaam">
    <button onclick="voegZelfItemsToe()">Klikieklik</button>
    <tr></tr>
    <button onclick="haalOp()">haal op</button>
   <div id="aanvragers"></div>

    
</body>
</html>